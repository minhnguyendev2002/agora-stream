{"ast":null,"code":"var _jsxFileName = \"D:\\\\Project\\\\Freelance\\\\Wm-Bank\\\\API-Examples-Web\\\\react\\\\open-live\\\\src\\\\utils\\\\container.jsx\";\nimport React, { createContext, useContext, useReducer, useState, useEffect } from 'react';\nimport { reducer, defaultState } from './store';\nimport CustomizedSnackbar from './snackbar-wrapper';\nimport Loading from './loading';\nconst StateContext = createContext({});\nconst MutationContext = createContext({});\nexport const ContainerProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(reducer, defaultState);\n  window.rootState = state;\n  const [toasts, updateToasts] = useState([]);\n  const methods = {\n    startLoading() {\n      dispatch({\n        type: 'loading',\n        payload: true\n      });\n    },\n    stopLoading() {\n      dispatch({\n        type: 'loading',\n        payload: false\n      });\n    },\n    updateConfig(params) {\n      dispatch({\n        type: 'config',\n        payload: {\n          ...state.config,\n          ...params\n        }\n      });\n    },\n    setClient(clientInstance) {\n      dispatch({\n        type: 'client',\n        payload: clientInstance\n      });\n    },\n    setCodec(param) {\n      dispatch({\n        type: 'codec',\n        payload: param\n      });\n    },\n    setVideo(param) {\n      dispatch({\n        type: 'video',\n        payload: param\n      });\n    },\n    setAudio(param) {\n      dispatch({\n        type: 'audio',\n        payload: param\n      });\n    },\n    setScreen(param) {\n      dispatch({\n        type: 'screen',\n        payload: param\n      });\n    },\n    setProfile(param) {\n      dispatch({\n        type: 'profile',\n        payload: param\n      });\n    },\n    toastSuccess(message) {\n      updateToasts([...toasts, {\n        variant: 'success',\n        message\n      }]);\n    },\n    toastInfo(message) {\n      updateToasts([...toasts, {\n        variant: 'info',\n        message\n      }]);\n    },\n    toastError(message) {\n      updateToasts([...toasts, {\n        variant: 'error',\n        message\n      }]);\n    },\n    removeTop() {\n      const items = toasts.filter((e, idx) => idx > 0);\n      updateToasts([...items]);\n    },\n    setLocalStream(param) {\n      dispatch({\n        type: 'localStream',\n        payload: param\n      });\n    },\n    setCurrentStream(param) {\n      dispatch({\n        type: 'currentStream',\n        payload: param\n      });\n    },\n    setDevicesList(param) {\n      dispatch({\n        type: 'devicesList',\n        payload: param\n      });\n    },\n    clearAllStream() {\n      dispatch({\n        type: 'clearAllStream'\n      });\n    },\n    addLocal(evt) {\n      const {\n        stream\n      } = evt;\n      methods.setLocalStream(stream);\n      methods.setCurrentStream(stream);\n    },\n    addStream(evt) {\n      const {\n        stream\n      } = evt;\n      dispatch({\n        type: 'addStream',\n        payload: stream\n      });\n    },\n    removeStream(evt) {\n      const {\n        stream\n      } = evt;\n      dispatch({\n        type: 'removeStream',\n        stream: stream\n      });\n    },\n    removeStreamById(evt) {\n      const {\n        uid\n      } = evt;\n      dispatch({\n        type: 'removeStream',\n        uid: uid\n      });\n    },\n    connectionStateChanged(curState, revState) {\n      methods.toastInfo(`${curState}`);\n    }\n    // enableBeauty(enable) {\n    //   dispatch({type: 'enableBeauty', enable});\n    // }\n  };\n\n  useEffect(() => {\n    window.sessionStorage.setItem('custom_storage', JSON.stringify({\n      uid: state.config.uid,\n      host: state.config.host,\n      channelName: state.config.channelName,\n      token: state.config.token,\n      resolution: state.config.resolution\n    }));\n  }, [state]);\n  return /*#__PURE__*/React.createElement(StateContext.Provider, {\n    value: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MutationContext.Provider, {\n    value: methods,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CustomizedSnackbar, {\n    toasts: toasts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }), state.loading ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 34\n    }\n  }) : null, children));\n};\nexport function useGlobalState() {\n  return useContext(StateContext);\n}\nexport function useGlobalMutation() {\n  return useContext(MutationContext);\n}","map":{"version":3,"names":["React","createContext","useContext","useReducer","useState","useEffect","reducer","defaultState","CustomizedSnackbar","Loading","StateContext","MutationContext","ContainerProvider","_ref","children","state","dispatch","window","rootState","toasts","updateToasts","methods","startLoading","type","payload","stopLoading","updateConfig","params","config","setClient","clientInstance","setCodec","param","setVideo","setAudio","setScreen","setProfile","toastSuccess","message","variant","toastInfo","toastError","removeTop","items","filter","e","idx","setLocalStream","setCurrentStream","setDevicesList","clearAllStream","addLocal","evt","stream","addStream","removeStream","removeStreamById","uid","connectionStateChanged","curState","revState","sessionStorage","setItem","JSON","stringify","host","channelName","token","resolution","createElement","Provider","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","loading","useGlobalState","useGlobalMutation"],"sources":["D:/Project/Freelance/Wm-Bank/API-Examples-Web/react/open-live/src/utils/container.jsx"],"sourcesContent":["import React, {\n    createContext,\n    useContext,\n    useReducer,\n    useState,\n    useEffect\n} from 'react'\nimport {reducer, defaultState} from './store'\nimport CustomizedSnackbar from './snackbar-wrapper'\nimport Loading from './loading'\n\nconst StateContext = createContext({})\nconst MutationContext = createContext({})\n\nexport const ContainerProvider = ({children}) => {\n    const [state, dispatch] = useReducer(reducer, defaultState)\n\n    window.rootState = state\n\n    const [toasts, updateToasts] = useState([])\n\n    const methods = {\n        startLoading() {\n            dispatch({type: 'loading', payload: true})\n        },\n        stopLoading() {\n            dispatch({type: 'loading', payload: false})\n        },\n        updateConfig(params) {\n            dispatch({type: 'config', payload: {...state.config, ...params}})\n        },\n        setClient(clientInstance) {\n            dispatch({type: 'client', payload: clientInstance})\n        },\n        setCodec(param) {\n            dispatch({type: 'codec', payload: param})\n        },\n        setVideo(param) {\n            dispatch({type: 'video', payload: param})\n        },\n        setAudio(param) {\n            dispatch({type: 'audio', payload: param})\n        },\n        setScreen(param) {\n            dispatch({type: 'screen', payload: param})\n        },\n        setProfile(param) {\n            dispatch({type: 'profile', payload: param})\n        },\n        toastSuccess(message) {\n            updateToasts([\n                ...toasts,\n                {\n                    variant: 'success',\n                    message\n                }\n            ])\n        },\n        toastInfo(message) {\n            updateToasts([\n                ...toasts,\n                {\n                    variant: 'info',\n                    message\n                }\n            ])\n        },\n        toastError(message) {\n            updateToasts([\n                ...toasts,\n                {\n                    variant: 'error',\n                    message\n                }\n            ])\n        },\n        removeTop() {\n            const items = toasts.filter((e, idx) => idx > 0)\n            updateToasts([...items])\n        },\n        setLocalStream(param) {\n            dispatch({type: 'localStream', payload: param})\n        },\n        setCurrentStream(param) {\n            dispatch({type: 'currentStream', payload: param})\n        },\n        setDevicesList(param) {\n            dispatch({type: 'devicesList', payload: param})\n        },\n        clearAllStream() {\n            dispatch({type: 'clearAllStream'})\n        },\n        addLocal(evt) {\n            const {stream} = evt\n            methods.setLocalStream(stream)\n            methods.setCurrentStream(stream)\n        },\n        addStream(evt) {\n            const {stream} = evt\n            dispatch({type: 'addStream', payload: stream})\n        },\n        removeStream(evt) {\n            const {stream} = evt\n            dispatch({type: 'removeStream', stream: stream})\n        },\n        removeStreamById(evt) {\n            const {uid} = evt\n            dispatch({type: 'removeStream', uid: uid})\n        },\n        connectionStateChanged(curState, revState) {\n            methods.toastInfo(`${curState}`)\n        }\n        // enableBeauty(enable) {\n        //   dispatch({type: 'enableBeauty', enable});\n        // }\n    }\n\n    useEffect(() => {\n        window.sessionStorage.setItem(\n            'custom_storage',\n            JSON.stringify({\n                uid: state.config.uid,\n                host: state.config.host,\n                channelName: state.config.channelName,\n                token: state.config.token,\n                resolution: state.config.resolution\n            })\n        )\n    }, [state])\n\n    return (\n        <StateContext.Provider value={state}>\n            <MutationContext.Provider value={methods}>\n                <CustomizedSnackbar toasts={toasts}/>\n                {state.loading ? <Loading/> : null}\n                {children}\n            </MutationContext.Provider>\n        </StateContext.Provider>\n    )\n}\n\nexport function useGlobalState() {\n    return useContext(StateContext)\n}\n\nexport function useGlobalMutation() {\n    return useContext(MutationContext)\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}