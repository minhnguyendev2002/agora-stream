{"ast":null,"code":"var _jsxFileName = \"D:\\\\Project\\\\Freelance\\\\Wm-Bank\\\\API-Examples-Web\\\\react\\\\open-live\\\\src\\\\pages\\\\meeting\\\\stream-player.jsx\";\nimport React, { useMemo, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nStreamPlayer.propTypes = {\n  uid: PropTypes.number.isRequired\n};\nexport default function StreamPlayer(props) {\n  const {\n    uid,\n    isLocal,\n    videoTrack,\n    audioTrack,\n    muteVideo,\n    muteAudio,\n    showInfo,\n    rtcClient\n  } = props;\n  useMemo(() => {\n    if (videoTrack != null) {\n      if (muteVideo === true) {\n        videoTrack.stop();\n      } else if (muteVideo === false) {\n        videoTrack.play(`stream-player-${uid}`);\n      }\n    }\n    //eslint-disable-next-line\n  }, [muteVideo, videoTrack]);\n  useMemo(() => {\n    if (videoTrack != null) {\n      if (muteAudio === true) {\n        audioTrack.stop();\n      } else if (muteAudio === false) {\n        audioTrack.play();\n      }\n    }\n    //eslint-disable-next-line\n  }, [muteAudio, audioTrack]);\n  useEffect(() => {\n    if (videoTrack != null) {\n      if (muteVideo === true) {\n        videoTrack.stop();\n      } else if (muteVideo === false) {\n        videoTrack.play(`stream-player-${uid}`);\n      }\n    }\n\n    //eslint-disable-next-line\n  }, [muteVideo, videoTrack]);\n  const [state, setState] = useState({\n    accessDelay: 0,\n    fps: 0,\n    resolution: 0\n  });\n  const analytics = useMemo(() => state, [state]);\n  useEffect(() => {\n    const timer = setInterval(() => {\n      if (isLocal) {\n        const stats = rtcClient.getLocalVideoStats();\n        const width = stats.captureResolutionWidth;\n        const height = stats.captureResolutionHeight;\n        const fps = stats.captureFrameRate;\n        setState({\n          accessDelay: `${stats.accessDelay ? stats.accessDelay : 0}`,\n          resolution: `${width}x${height}`,\n          fps: `${fps || 0}`\n        });\n      } else {\n        const stats = rtcClient.getRemoteVideoStats();\n        const width = stats.captureResolutionWidth;\n        const height = stats.captureResolutionHeight;\n        const fps = stats.captureFrameRate;\n        setState({\n          accessDelay: `${stats.accessDelay ? stats.accessDelay : 0}`,\n          resolution: `${width}x${height}`,\n          fps: `${fps || 0}`\n        });\n      }\n    }, 500);\n    return () => {\n      clearInterval(timer);\n    };\n  }, [isLocal, rtcClient]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: 'stream-player',\n    id: `stream-player-${uid}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, props.children, showInfo ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: props.className,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, \"SD-RTN delay: \", analytics.accessDelay, \"ms\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }, \"Video: \", analytics.fps, \"fps \", analytics.resolution))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"stream-uid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"UID: \", uid));\n}","map":{"version":3,"names":["React","useMemo","useState","useEffect","PropTypes","StreamPlayer","propTypes","uid","number","isRequired","props","isLocal","videoTrack","audioTrack","muteVideo","muteAudio","showInfo","rtcClient","stop","play","state","setState","accessDelay","fps","resolution","analytics","timer","setInterval","stats","getLocalVideoStats","width","captureResolutionWidth","height","captureResolutionHeight","captureFrameRate","getRemoteVideoStats","clearInterval","createElement","className","id","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","children"],"sources":["D:/Project/Freelance/Wm-Bank/API-Examples-Web/react/open-live/src/pages/meeting/stream-player.jsx"],"sourcesContent":["import React, {useMemo, useState, useEffect} from 'react'\nimport PropTypes from 'prop-types'\n\nStreamPlayer.propTypes = {\n    uid: PropTypes.number.isRequired\n}\n\nexport default function StreamPlayer(props) {\n    const {uid, isLocal, videoTrack, audioTrack, muteVideo, muteAudio, showInfo, rtcClient} = props\n\n    useMemo(() => {\n        if (videoTrack != null) {\n            if (muteVideo === true) {\n                videoTrack.stop()\n            } else if (muteVideo === false) {\n                videoTrack.play(`stream-player-${uid}`)\n            }\n        }\n        //eslint-disable-next-line\n    }, [muteVideo, videoTrack])\n\n    useMemo(() => {\n        if (videoTrack != null) {\n            if (muteAudio === true) {\n                audioTrack.stop()\n            } else if (muteAudio === false) {\n                audioTrack.play()\n            }\n        }\n        //eslint-disable-next-line\n    }, [muteAudio, audioTrack])\n\n    useEffect(() => {\n        if (videoTrack != null) {\n            if (muteVideo === true) {\n                videoTrack.stop()\n            } else if (muteVideo === false) {\n                videoTrack.play(`stream-player-${uid}`)\n            }\n        }\n        \n        //eslint-disable-next-line\n    }, [muteVideo, videoTrack])\n\n    const [state, setState] = useState({\n        accessDelay: 0,\n        fps: 0,\n        resolution: 0\n    })\n\n    const analytics = useMemo(() => state, [state])\n\n    useEffect(() => {\n        const timer = setInterval(() => {\n            if (isLocal) {\n                const stats = rtcClient.getLocalVideoStats()\n                const width = stats.captureResolutionWidth\n                const height = stats.captureResolutionHeight\n                const fps = stats.captureFrameRate\n                setState({\n                    accessDelay: `${stats.accessDelay ? stats.accessDelay : 0}`,\n                    resolution: `${width}x${height}`,\n                    fps: `${fps || 0}`\n                })\n            } else {\n                const stats = rtcClient.getRemoteVideoStats()\n                const width = stats.captureResolutionWidth\n                const height = stats.captureResolutionHeight\n                const fps = stats.captureFrameRate\n                setState({\n                    accessDelay: `${stats.accessDelay ? stats.accessDelay : 0}`,\n                    resolution: `${width}x${height}`,\n                    fps: `${fps || 0}`\n                })\n            }\n        }, 500)\n\n        return () => {\n            clearInterval(timer)\n        }\n    }, [isLocal, rtcClient])\n\n    return (\n        <div\n            className={'stream-player'}\n            id={`stream-player-${uid}`}\n        >\n            {props.children}\n            {showInfo ? (\n                <div>\n                    <div className={props.className}>\n                        <span>SD-RTN delay: {analytics.accessDelay}ms</span>\n                        <span>\n              Video: {analytics.fps}fps {analytics.resolution}\n            </span>\n                    </div>\n                </div>\n            ) : null}\n            <div className=\"stream-uid\">UID: {uid}</div>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}